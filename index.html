<html>
<head>
    <title>Star Fight</title>
    <!-- Linjs externos -->
    <!-- Bootstrap 4 -->
    <link rel="stylesheet" href="https://cdn.rawgit.com/twbs/bootstrap/v4-dev/dist/css/bootstrap.css">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdn.rawgit.com/twbs/bootstrap/v4-dev/dist/js/bootstrap.js"></script>
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    
    <link rel="stylesheet" href="engine/stylus/star.css" />
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="engine/life_source/colisor.js"></script>
    <script src="engine/life_source/spritesheet.js"></script>
    <script src="engine/life_source/animate.js"></script>
    <script src="engine/life_source/teclado.js"></script>
    <script src="engine/sprites/bola.js"></script>
    <script src="engine/sprites/explode.js"></script>
    <script src="engine/sprites/heroi.js"></script>

</head>
<body>

	<div id="all">
		
		<h1 style="color: #fff;" >Star Fight</h1>

		<div id="game">
            <canvas id='star_canvas' width="400px" height="400px">
            Seu navegador não suporta o Canvas do HTML5. <br>
            Procure atualizá-lo.
            
            <script>
                $(document).ready(function(){
            
                /* Crindo Animação */
                
                // Referências para o Canvas
                var canvas = document.getElementById('star_canvas');
                var context = canvas.getContext('2d');
                var colisor = new Colisor();
                var animacao = new Animate(context);
                
                // Criando alguns sprites
                var b1 = new Bola(context);
                b1.x = 50;
                b1.y = 200;
                b1.velocidadeX = 3;
                b1.velocidadeY = -5;
                b1.cor = 'red';
                b1.raio = 15;
                b1.ident = 'b1';
                
                var b2 = new Bola(context);
                b2.x = 200;
                b2.y = 100;
                b2.velocidadeX = -5;
                b2.velocidadeY = 5;
                b2.cor = 'blue';
                b2.raio = 10;
                b2.ident = 'b2';
                
                var b3 = new Bola(context);
                b3.x = 50;
                b3.y = 300;
                b3.velocidadeX = -5;
                b3.velocidadeY = 5;
                b3.cor = 'green';
                b3.raio = 10;
                b3.ident = 'b3';
                
                var expld = new Explode(context);
                var imagemExpl = new Image();
                imagemExpl.src = "engine/images/Fire8.png";
                expld.imagem = imagemExpl;
                expld.imgSize = 150;
                expld.imgPosX = 50;
                expld.imgPosY = 100;
                expld.frameSize = 192;
                
                // Criando o loop de animação
                
                animacao.novoSprite(b1);
                animacao.novoSprite(b2);
                animacao.novoSprite(b3);
                //animacao.novoSprite(expld);
                
                colisor.novoSprite(b1);
                colisor.novoSprite(b2);
                colisor.novoSprite(b3);

                animacao.colisor = colisor;
                colisor.aoColidir = function(s1, s2) {
                    //alert('PÁ');
                };
                //animacao.ligar();

                /* Movimentando personagem */
                
                // Posição inicial do personagem

                var teclado = new Teclado(document);
                var img = new Image();

                img.src = "engine/images/BlackMage.png";

                var personagem = new Heroi(context, teclado, animacao, img, colisor);
                personagem.imgPosX = 0;
                personagem.imgPosY = 150;
                personagem.imgSizeX = 42;
                personagem.imgSizeY = 58;
                personagem.velocidade = 2.5;

				// Init
				animacao.novoSprite(personagem);

                img.onload = function(){
                    if(!animacao.ligado) {
                        animacao.colisor = colisor;
                        animacao.ligar();
                    }
                }
                
                teclado.disparou(ESPACO, function() {
                    personagem.atirar();
                });

                $("#char_input input").click(function(){
                    img.src = $(this).val();
                    personagem.sheet.update_img(img);
                    $("#char_input input").blur();
                });
                    
            });
            </script>
            
            </canvas>
            
            <div id="side_menu">
                <span id="x"></span>
                <span id="y"></span>
                
                <div id="char_select"> 
                    <h5>Mude seu personagem: </h5>
                    <form id="char_input">
                      <input type="radio" name="char" value="engine/images/BlackMage.png">Black Mage
                      <br>
                      <input type="radio" name="char" value="engine/images/darthvader.png">Darth Vader
                      <br>
                      <input type="radio" name="char" value="engine/images/Mage02.png">Mage Away
                    </form>
                </div>
                
                <h5>Setas de Comandos:</h5>
                Direcionais: Suas respectivas direcoes <br>
                Espaco: Atira
                
            </div>
		</div>
	</div>

</body>
</html>